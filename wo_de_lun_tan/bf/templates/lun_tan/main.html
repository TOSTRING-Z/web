{% extends "public.html" %}
{% block title %}
    M站_萌咔萌咔弹幕视频网_干净的动漫网站(´っω･｀｡):{{ plate["subplate_name"] }}
{% endblock %}
{% block keywords %}plate["subplate_name"],M站,动漫,二次元,萌咔,萌咔萌咔,萌咔by,弹幕{% endblock %}
{% block description %}萌咔萌咔,简称M站吧( ,,´･ω･)ﾉ(´っω･｀｡)无聊时建立本网站,为二次元大家建立一个干净,舒适的╮(╯▽╰)╭ 补番环境。本网站设置最多6个播放源,应该不容易挂完吧( ๑´•ω•) (ㆆᴗㆆ){% endblock %}
{% block plate_id %}{{ plate["id"] }}{% endblock %}
{% block index %}{{ 'active' }}{% endblock %}
{% block search %}{{ search }}{% endblock %}
{% block brand %}<a id="this" style="line-height:30px;width:230px;text-overflow:ellipsis;color:#fff;display: none;font-size: 20px;overflow:hidden;white-space: nowrap">{{ plate["subplate_name"] }}</a>{% endblock %}
{% block container %}
    <style>
    .sel a {
        color: #8590a6;
        font-weight: bold;
        opacity: 0.9;
        box-shadow: 0 1px 3px rgba(26,26,26,.1);
    }

    .lv-1 {
        color:#ffffff;
        font-weight: bold;
        font-size: 10px;
        border-top-left-radius: 2px;
        border-bottom-left-radius: 2px;
        position: absolute;
        bottom: 0;
        padding: 0 2px;
    }
    .lv-2 {
        color:#ffffff;
        font-weight: bold;
        font-size: 13px;
        border-top-left-radius: 2px;
        border-top-right-radius: 2px;
        border-bottom-right-radius: 2px;
        position: absolute;
        bottom: 0;
        left:15px;
        padding: 0 2px;
    }
    @media (max-width: 990px) {
       .lv-2 {
           left:13px;
       }
    }
    .lv {
        display: inline-block;
        position: relative;
        bottom: 4px;
        left: 5px;
        width: 40px;
        vertical-align: bottom;
    }
    #cloud {
    	position: relative;
    }
    </style>

    <div class="row">
        <div class="col-lg-8">
        {% if plate["id"] != '' %}
            <div class="card">
                <div class="card-body sel">
                    {% for types in classification %}
                    <a id="{{ types.type }}" href="/lun_tan?plate_id={{ types.plate_id }}&search={{ search }}&type={{ types.type }}">{{ types.type_name }}<span class="badge">{{ num[types.type] }}</span></a>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
            <div class="card">
                <div class="card-body">
                <table class="table" id="table_main" style="width:100%">
                    <thead style="display: none">
                      <tr>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <ul class="pagination" id="table_main_ul"></ul>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            {% if search == None or search == 'None' or search == '' and plate["id"] != '' %}
                <div class="card fixedsticky" style="top:67px">
                    <div class="card-body">
                        <div class="media">
                            <img src="{{ url_for( 'static',filename='public/img/plate/{id}'.format(id=plate["id"])) }}" alt="{{ plate["subplate_name"] }}" class="align-self-start mr-3 rounded-circle" style="width:60px">
                            <div class="media-body">
                                <h4>{{ plate["subplate_name"] }}</h4>
                                <p><a class="btn btn-primary"  href="/xin_jian_tao_lun_html/{{ plate["id"] }}/{{ sel }}">新建楼层(⋈◍＞◡＜◍)</a></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card fixedsticky" style="top:207px;">
                {% else %}
                    <div class="card fixedsticky">
                {% endif %}
                    <div class="card-body">
                        <div class="media">
                            <div class="media-body">
                                <h4 class="widget-title">分类云</h4>
                                <div id="cloud"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block public %}

    <script src="{{ url_for( 'static',filename='js/datatable.js') }}"></script>
    <script src="{{ url_for( 'static',filename='js/cloud.js') }}"></script>
    <!-- 初始化表格 -->
    <script type="text/javascript">
        var data_table_main = {{ data|safe }};
        var table_main = new table("table_main",data_table_main);
        table_main;
    </script>
    <!-- 初始化表格结束 -->
    <script type="text/javascript">
        $(document).ready(function () {
            $("#{{ sel }}").attr("class","sel-active").css("color","orange").animate({fontSize:"20px"});
            $("#{{ sel }} span").css("color","orange");
            document.getElementsByClassName("sel")[0].scrollLeft = document.getElementById("{{ sel }}").offsetLeft - 120;
        });
        var cloud_main = new cloud({{ dataCloud|safe }},"cloud",100);
        cloud_main;

        $(document).ready(function() {
            //为当前窗口添加滚动条滚动事件（适用于所有可滚动的元素和 window 对象（浏览器窗口））
            $(window).scroll(function () {
                //创建一个变量存储当前窗口下移的高度
                var scroTop = $(window).scrollTop();
                //判断当前窗口滚动高度
                //如果大于100，则显示顶部元素，否则隐藏顶部元素
                if (scroTop > 100) {
                    $('#mengka').fadeOut(250,function(){
                        $('#this').fadeIn(250).css('display','block');
                    });

                } else {
                    $('#this').fadeOut(250,function(){
                        $('#mengka').fadeIn(250);
                    });
                }
            });
        })
    </script>

{% endblock %}
